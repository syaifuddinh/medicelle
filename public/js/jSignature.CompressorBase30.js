(function(){for(var n={},t={},r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),e=r.length/2,i=e-1;i>-1;i--)n[r[i]]=r[i+e],t[r[i+e]]=r[i];var s,o,u=function(t){for(var r=t.split(""),e=r.length,i=1;i<e;i++)r[i]=n[r[i]];return r.join("")},a=function(n){for(var t,r,i,s=[],o=0,a=1,h=n.length,g=0;g<h;g++)r=(t=Math.round(n[g]))-o,o=t,r<0&&a>0?(a=-1,s.push("Z")):r>0&&a<0&&(a=1,s.push("Y")),(i=Math.abs(r))>=e?s.push(u(i.toString(e))):s.push(i.toString(e));return s.join("")},h=function(r){for(var i,s,o=[],u=r.split(""),a=u.length,h=1,g=[],p=0,l=0;l<a;l++)(i=u[l])in n||"Z"===i||"Y"===i?(0!==g.length&&(s=parseInt(g.join(""),e)*h+p,o.push(s),p=s),"Z"===i?(h=-1,g=[]):"Y"===i?(h=1,g=[]):g=[i]):g.push(t[i]);return o.push(parseInt(g.join(""),e)*h+p),o},g=function(n){for(var t,r=[],e=n.length,i=0;i<e;i++)t=n[i],r.push(a(t.x)),r.push(a(t.y));return r.join("_")},p=function(n){for(var t=[],r=n.split("_"),e=r.length/2,i=0;i<e;i++)t.push({x:h(r[2*i]),y:h(r[2*i+1])});return t},l="image/jsignature;base30",f=function(n){return[l,g(n)]},c=function(n,t,r){"string"==typeof n&&(n.substring(0,l.length).toLowerCase()===l&&(n=n.substring(l.length+1)),r(p(n)))};if(null==this.jQuery)throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");s=this.jQuery,(o=s.fn.jSignature)("addPlugin","export","base30",f),o("addPlugin","export",l,f),o("addPlugin","import","base30",c),o("addPlugin","import",l,c),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:u,compressstrokeleg:a,uncompressstrokeleg:h,compressstrokes:g,uncompressstrokes:p,charmap:n})}).call("undefined"!=typeof window?window:this);